var b=Object.defineProperty;var v=(r,e,t)=>e in r?b(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var h=(r,e,t)=>v(r,typeof e!="symbol"?e+"":e,t);import{w as W}from"./with-props-CmJzUyz8.js";import{l as n,r as p}from"./chunk-GNGMS2XR-Dos2DHKy.js";function C({press:r}){return n.jsxs("nav",{className:"navbar",children:[n.jsx("div",{className:"navbar-section left",children:r&&n.jsx("button",{className:"back-btn",onClick:r,children:"← Back"})}),n.jsx("div",{className:"navbar-section center",children:n.jsx("h1",{className:"navbar-title",children:"Type The Rainbow"})}),n.jsx("div",{className:"navbar-section right"})]})}class T{constructor(e){h(this,"value");h(this,"next",null);this.value=e}}class E{constructor(e){h(this,"head",null);h(this,"tail",null);h(this,"length",0);e&&this.addWord(e)}add(e){const t=new T(e);this.head?(this.tail&&(this.tail.next=t),this.tail=t):this.head=this.tail=t,this.length++}addWord(e){for(let t of e)this.add(t)}toArray(){let e=[],t=this.head;for(;t;)e.push(t.value),t=t.next;return e}toString(){return this.toArray().join("")}}class R{constructor(e){h(this,"head",null);h(this,"tail",null);h(this,"next",null);if(e)for(let t of e)this.addWord(new E(t))}addWord(e){this.head?(this.tail&&(this.tail.next=e),this.tail=e):this.head=this.tail=e}toArray(){const e=[];let t=this.head;for(;t;)e.push(t.toArray()),t=t.next;return e}toStringArray(){const e=[];let t=this.head;for(;t;)e.push(t.toString()),t=t.next;return e}toString(){let e="",t=this.head;for(;t;)e+=t.toString()+" ",t=t.next;return e.trim()}}class y{constructor(e){h(this,"head",null);h(this,"tail",null);h(this,"length",0);e&&this.splitStory(e)}addSentence(e){this.head?(this.tail&&(this.tail.next=e),this.tail=e):this.head=this.tail=e,this.length++}splitStory(e){const t=e.match(/[^.!?]+[.!?]?/g)||[];for(const s of t){const o=s.trim().split(/\s+/),a=new R(o);this.addSentence(a)}}toArray(){let e=[],t=this.head;for(;t;)e.push(t.toArray().join("")),t=t.next;return e}toString(){let e="",t=this.head;for(;t;)e+=t.toString()+" ",t=t.next;return e}toSentenceList(){const e=[];let t=this.head;for(;t;)e.push(t),t=t.next;return e}}function A(r,e){var t,s,o,a;switch(e.type){case"INIT":{const d=e.story.head,l=(d==null?void 0:d.head)??null,i=(l==null?void 0:l.head)??null;return{story:e.story,currentSentenceNode:d,currentWordNode:l,nextWordNode:null,prevWordNode:null,currentLetterNode:i,typedLetters:[],wasWrongLetter:!1,wasCorrectWord:!1,isCompleted:!1,resetOnFail:e.resetOnFail,showSentence:e.showSentence}}case"CLEAR_FLAGS":return{...r,wasWrongLetter:!1,wasCorrectWord:!1};case"TYPE_LETTER":{if(!r.currentLetterNode||r.isCompleted)return r;const d=r.currentLetterNode.value,l=e.letter;if(console.log("Typed:",l,"| Expected:",d),!(l===d))return r.resetOnFail?{...r,currentLetterNode:((t=r.currentWordNode)==null?void 0:t.head)??null,typedLetters:[],wasWrongLetter:!0}:{...r,wasWrongLetter:!0};const c=r.currentLetterNode.next;if(c)return{...r,currentLetterNode:c,typedLetters:[...r.typedLetters,e.letter]};if(!c){const u=r.currentWordNode.next,g=((s=r.currentSentenceNode)==null?void 0:s.next)??null;return u?{...r,currentWordNode:u,nextWordNode:g==null?void 0:g.head,currentLetterNode:u.head,typedLetters:[],wasCorrectWord:!0}:g?{...r,currentSentenceNode:g,currentWordNode:g.head,currentLetterNode:((o=g.head)==null?void 0:o.head)??null,typedLetters:[],wasCorrectWord:!0}:{...r,currentWordNode:null,currentLetterNode:null,currentSentenceNode:null,typedLetters:[],isCompleted:!0,wasCorrectWord:!0}}}case"RESET_WORD":return{...r,currentLetterNode:((a=r.currentWordNode)==null?void 0:a.head)??null,typedLetters:[]};case"UPDATE_GAME_SETTINGS":return{...r,resetOnFail:e.resetOnFail??r.resetOnFail,showSentence:e.showSentence??r.showSentence};default:return r}}function k(r,e=!0,t=!1){var l;const[s,o]=p.useReducer(A,{story:new y,currentSentenceNode:null,currentWordNode:null,prevWordNode:null,nextWordNode:null,currentLetterNode:null,typedLetters:[],wasWrongLetter:!1,wasCorrectWord:!1,isCompleted:!1,resetOnFail:e,showSentence:t});p.useEffect(()=>{const i=new y;i.splitStory(r),o({type:"INIT",story:i,resetOnFail:e,showSentence:t})},[r]),p.useEffect(()=>{o({type:"UPDATE_GAME_SETTINGS",resetOnFail:e,showSentence:t})},[e,t]),p.useEffect(()=>{if(s.wasWrongLetter||s.wasCorrectWord){const i=setTimeout(()=>{o({type:"CLEAR_FLAGS"})},400);return()=>clearTimeout(i)}},[s.wasWrongLetter,s.wasCorrectWord]);const a=i=>o({type:"TYPE_LETTER",letter:i}),d=()=>o({type:"RESET_WORD"});return{story:s.story,currentLetter:((l=s.currentLetterNode)==null?void 0:l.value)??null,currentWord:s.currentWordNode,nextWord:s.currentWordNode,prevWord:s.prevWordNode,currentSentence:s.currentSentenceNode,typedLetters:s.typedLetters,wasWrongLetter:s.wasWrongLetter,wasCorrectWord:s.wasCorrectWord,isCompleted:s.isCompleted,showSentence:s.showSentence,typeLetter:a,resetWord:d}}function F(r,e){const s={t:1,h:.6,b:.4}[e];return{t:`rgba(255, 216, 61, ${s})`,i:`rgba(240, 46, 28, ${s})`,i2:`rgba(212, 138, 28, ${s})`,m:`rgba(212, 200, 28, ${s})`,r:`rgba(87, 143, 24, ${s})`,p:`rgba(2, 204, 181, ${s})`,p2:`rgba(2, 204, 181, ${s})`}[r]}const $={a:{finger:"p",hand:"l",row:"h"},b:{finger:"i",hand:"l",row:"b"},c:{finger:"m",hand:"l",row:"b"},d:{finger:"m",hand:"l",row:"h"},e:{finger:"m",hand:"l",row:"t"},f:{finger:"i2",hand:"l",row:"h"},g:{finger:"i",hand:"l",row:"h"},h:{finger:"i",hand:"r",row:"h"},i:{finger:"m",hand:"r",row:"t"},j:{finger:"i2",hand:"r",row:"h"},k:{finger:"m",hand:"r",row:"h"},l:{finger:"r",hand:"r",row:"h"},m:{finger:"i2",hand:"r",row:"b"},n:{finger:"i",hand:"r",row:"b"},o:{finger:"r",hand:"r",row:"t"},p:{finger:"p",hand:"r",row:"t"},q:{finger:"p",hand:"l",row:"t"},r:{finger:"i2",hand:"l",row:"t"},s:{finger:"r",hand:"l",row:"h"},t:{finger:"i",hand:"l",row:"t"},u:{finger:"i2",hand:"r",row:"t"},v:{finger:"i2",hand:"l",row:"b"},w:{finger:"r",hand:"l",row:"t"},x:{finger:"r",hand:"l",row:"b"},y:{finger:"i",hand:"r",row:"t"},z:{finger:"p",hand:"l",row:"b"},",":{finger:"m",hand:"r",row:"b"},".":{finger:"r",hand:"r",row:"b"},"/":{finger:"r",hand:"r",row:"b"},"?":{finger:"r",hand:"r",row:"b"},":":{finger:"p",hand:"r",row:"h"},";":{finger:"p",hand:"r",row:"h"},"'":{finger:"p2",hand:"r",row:"h"},'"':{finger:"p2",hand:"r",row:"h"}};function N({word:r,currentLetter:e,shake:t,correct:s}){return r?n.jsx("div",{className:`word-container ${t?"shake":""} ${s?"correct":""}`,children:n.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"8px"},children:[...r].map((o,a)=>{const d=o.toLowerCase(),l=$[d];if(!l)return n.jsx("div",{className:"letter-box default",children:n.jsx("h1",{children:o})},a);const i=F(l.finger,l.row),c=l.hand==="l"?`linear-gradient(to right, ${i}, ${i}, rgb(232, 232, 232))`:`linear-gradient(to left, ${i}, ${i}, rgb(232, 232, 232))`;return n.jsx("div",{style:{margin:e===o?"0 6px":"0 1px",transition:"transform 0.3s ease"},children:n.jsx("div",{className:"letter-div",style:{transform:e===o?"scale(1.4)":"",transition:"transform 0.3s ease"},children:n.jsx("div",{className:"letter-box",style:{background:c,color:"black",borderWidth:0,fontWeight:e===o?"bold":"normal"},children:n.jsx("h1",{children:o})})})},a)})})}):null}function M({resetOnFail:r,setResetOnFail:e,showSentence:t,setShowSentence:s}){const o=({title:a,state:d,toggle:l})=>n.jsxs("div",{className:"settingsSwitch",children:[n.jsx("h6",{children:a}),n.jsx("button",{onClick:l,children:d?"ON":"OFF"})]});return n.jsxs("div",{className:"settingsMenu",children:[n.jsx(o,{title:"Reset Word On Fail",state:r,toggle:()=>e(a=>!a)}),n.jsx(o,{title:"Sentence Mode",state:t,toggle:()=>s(a=>!a)})]})}function O({sentence:r,currentWord:e,currentLetter:t}){const s=r.toStringArray(),o=()=>{let a=-1,d=[],l=[];return e&&(a=s.findIndex(i=>i===(e==null?void 0:e.toString()))),a>=0&&(d=s.slice(0,a),l=s.slice(a+1)),n.jsx("div",{className:"sentenceDisplay",children:n.jsxs("p",{children:[d.join(" ")," ",n.jsx("span",{className:"current-word",children:e==null?void 0:e.toString()})," ",l.join(" ")]})})};return n.jsxs("div",{children:[n.jsx(o,{}),n.jsx(N,{word:e==null?void 0:e.toString(),currentLetter:t})]})}function P({sentences:r,currentSentence:e,currentWord:t,wasWrongLetter:s}){return n.jsx("div",{className:"full-story-display",children:r.map((o,a)=>{const d=o===e;let l=[],i=o.head,c=0;for(;i;){const u=i===t;l.push(n.jsx("span",{className:`word-span ${u?"current-word":""} ${u&&s?"wrong-word":""}`,children:i.toString()},c)),i=i.next,c++}return n.jsx("p",{className:`sentence ${d?"active":""}`,children:l},a)})})}const I=`The wind howled through the trees.
Max zipped up his tent, hoping it would hold.
Raindrops tapped like fingers on the canvas above him.
Pip, his small dog, curled up close, trembling.
A flash of lightning lit up the forest, followed by a deep rumble.
"It's just a storm," Max whispered.
He reached for his flashlight and clicked it on.
The light flickered once, then stayed steady.
Max smiled. "We're okay, Pip. Just us, the rain, and the night."
Outside, the storm rolled on.`;function _(){const[r,e]=p.useState(""),[t,s]=p.useState(!0),[o,a]=p.useState(!1),{story:d,currentLetter:l,currentWord:i,currentSentence:c,wasWrongLetter:u,wasCorrectWord:g,isCompleted:w,typeLetter:j}=k(I,t,o),S=L=>{const x=L.target.value,m=x.slice(-1);e(x),m&&(j(m),e(""))};return n.jsxs("div",{children:[n.jsx("div",{children:o?c&&n.jsx(O,{sentence:c,currentWord:i||null,currentLetter:l}):n.jsx(n.Fragment,{children:n.jsx(N,{word:i==null?void 0:i.toString(),currentLetter:l,shake:u,correct:g})})}),w&&n.jsx("p",{children:"🎉 Story complete!"}),n.jsx("input",{className:"text-input",value:r,onChange:S,disabled:w,placeholder:"Type here"}),n.jsx(M,{resetOnFail:t,setResetOnFail:s,showSentence:o,setShowSentence:a}),n.jsx("div",{children:n.jsx(P,{sentences:d.toSentenceList(),currentSentence:c,currentWord:i,wasWrongLetter:u})})]})}function f({title:r,press:e}){return n.jsx("button",{className:"menuButton",onClick:e,children:r})}function D(){const[r,e]=p.useState(0),t=s=>{e(s)};return n.jsxs("main",{className:"welcome",children:[r===0&&n.jsxs("div",{children:[n.jsx("h1",{className:"logoTitle",children:"Type The Rainbow"}),n.jsx(f,{title:"Row Quiz",press:()=>t(1)}),n.jsx(f,{title:"Story Practice",press:()=>t(2)}),n.jsx(f,{title:"Words Per Minute Test",press:()=>t(3)})]}),r===1&&n.jsx(n.Fragment,{children:n.jsx("h3",{children:"Row Quiz"})}),r===2&&n.jsxs("div",{style:{height:"100%"},children:[n.jsx(C,{press:()=>t(0)}),n.jsx(_,{})]}),r===3&&n.jsx(n.Fragment,{children:n.jsx("h3",{children:"Words Per Minute Test"})})]})}function H({}){return[{title:"New React Router App"},{name:"description",content:"Welcome to React Router!"}]}const Q=W(function(){return n.jsx(D,{})});export{Q as default,H as meta};
